(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t){!function(e){e.utils={parseQueryString:function(e){var t=Object.create(null);return"string"!==typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var a=e.replace(/\+/g," ").split("="),n=a.shift(),r=a.length>0?a.join("="):void 0;n=decodeURIComponent(n),r=void 0===r?null:decodeURIComponent(r),void 0===t[n]?t[n]=r:Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]}),t):t}}}(window)},18:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),i=a.n(o),c=(a(29),a(1)),l=a(2),s=a(5),u=a(4),f=a(6),d=(a(11),a(7)),h=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).CLIENT_ID="dwzodxx4tsontje",a.state={isAuthenticated:!1,token:"",authUrl:"",files:""},a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){function e(){return window.utils.parseQueryString(window.location.hash).access_token}if(localStorage.getItem("access_token"))this.setState({isAuthenticated:!0,token:localStorage.getItem("access_token")});else if(e()){var t=e();localStorage.setItem("access_token",t),this.setState({token:t})}else{var a=new d.Dropbox({clientId:this.CLIENT_ID});this.setState({authUrl:a.getAuthenticationUrl("https://pixbox.netlify.com/")})}}},{key:"render",value:function(){return this.state.token?null:this.state.token?void 0:r.a.createElement("div",{id:"login"},r.a.createElement("h1",null,"WELCOME TO PIX-BOX"),r.a.createElement("a",{href:this.state.authUrl,id:"authlink",className:"button"}," ",r.a.createElement("i",{class:"fas fa-users"})," Login"))}}]),t}(r.a.Component),m=(a(30),a(3)),p=(a(31),a(8));function g(e,t){return new p.Dropbox({accessToken:localStorage.getItem("access_token")}).filesGetTemporaryLink({path:t}).then(function(e){window.open(e.link,"_blank")}),null}function v(e,t){var a=e[0];a&&new p.Dropbox({accessToken:localStorage.getItem("access_token")}).filesUpload({contents:a,path:t+"/"+a.name,autorename:!0}).then(function(e){return alert("Your File Has been uploaded! \xe1 la success"),null}).catch(function(e){console.error("ooo nooooo,its a error! Try again!")});return null}var k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={files:[],path:"",starred:[],previousPath:[]},a.findStarInfo=function(e){var t=a.state.starred,n=!1,r="",o=!1;a.state.files.map(function(t,a){t.id===e&&(n=!0,r=a)}),t.map(function(t){t.id===e&&(o=!0)}),!1===o&&!0===n&&(t.push(a.state.files[r]),a.setState({starred:t}))},a.checkIfItemIsStarred=function(e){var t=a.state.starred,n=!1;return t.map(function(t){t.id===e&&(n=!0)}),n},a.changeStar=function(e){a.checkIfItemIsStarred(e)?a.removeStar(e):a.findStarInfo(e)},a.removeStar=function(e){var t=a.state.starred;t.map(function(a,n){a.id===e&&t.splice(n,1)}),a.setState({starred:t})},a.starredList=function(){a.setState({path:""});var e=a.state.starred;a.setState({files:e})},a.loadPath=function(e){if(localStorage.getItem("access_token")){var t=Object(m.a)(Object(m.a)(a)),n=[];new d.Dropbox({accessToken:localStorage.getItem("access_token")}).filesListFolder({path:e}).then(function(e){var a=[];a.push(e.entries);var r=a[0].map(function(e){var t=[];return t[".tag"]=e[".tag"],t.id=e.id,t.name=e.name,t.path_display=e.path_display,t.path_lower=e.path_lower,t.size=e.size,t.server_modified=e.server_modified,t.client_modified=e.client_modified,t});n=r,t.setState({files:n})})}},a.changePath=function(e){a.setState({previousPath:a.state.path,path:e}),a.loadPath(e)},a.goBack=function(){a.setState({path:a.state.previousPath}),a.loadPath(a.state.previousPath)},a.goToParent=function(){var e=a.state.path.split("/");e.splice(0,1),e.splice(-1,1),e="/"+e.join("/"),a.changePath(e)},a.printBreadCrumbs=function(e){var t=e.toString(),a="",n=[];if(""!==t){var r=t.split("/");r.splice(0,1),r.map(function(e){var t=e;a=a+"/"+t,n.push([a,t])})}return n},a.upLoadAndChangePath=function(e,t){var n=v(e,t),r=setInterval(function(){null===n&&(a.changePath(t),clearInterval(r))},1e3)},a.signOut=function(){localStorage.removeItem("access_token"),localStorage.getItem("access_token")||(a.setState({files:[],path:"",starred:[],previousPath:[]}),window.location.href="https://pixbox.netlify.com/")},a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.loadPath(this.state.path)}},{key:"render",value:function(){var e=this;return localStorage.getItem("access_token")?r.a.createElement("div",null,r.a.createElement("h1",{className:"firstm"},"Welcome to your PIX-BOX"),r.a.createElement("button",{onClick:this.signOut,className:"button-signout"},"Sign Out"),r.a.createElement("div",{className:"navigation"},r.a.createElement("p",{onClick:function(){return e.changePath("")},className:"iconWrap"},r.a.createElement("i",{className:"fas fa-home  text-white"})),r.a.createElement("p",{onClick:function(){return e.starredList()},className:"iconWrap"},r.a.createElement("i",{className:"fas fa-star text-warning"}),"Starred"),r.a.createElement("p",{onClick:function(){return e.goBack()},className:"iconWrap"},r.a.createElement("i",{className:"fas fa-arrow-circle-left  text-white"}),"Go back"),r.a.createElement("hr",null),this.printBreadCrumbs(this.state.path).map(function(t){return r.a.createElement("line",null,r.a.createElement("breadcrumb",{onClick:function(){return e.changePath(t[0])}},t[1]),"/")})),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark",style:{fontSize:"20px"}},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Filename"),r.a.createElement("th",{scope:"col"},"Size"),r.a.createElement("th",{scope:"col"},"Timestamp"),r.a.createElement("th",{scope:"col"},"Last modified"),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,this.state.files.map(function(e){var t=this,a="",n="";return"folder"===e[".tag"]?(a="fas fa-folder",n=this.checkIfItemIsStarred(e.id)?"fas fa-star":"far fa-star",r.a.createElement("tr",{key:e.id},r.a.createElement("td",{onClick:function(){return t.changePath(e.path_lower)},className:a},r.a.createElement("p",{style:{paddingLeft:"1em",display:"inline-block"}},e.name)),r.a.createElement("td",null,e.size),r.a.createElement("td",null,e.client_modified),r.a.createElement("td",null,e.server_modified),r.a.createElement("td",{className:n,onClick:function(){return t.changeStar(e.id)}}))):"file"===e[".tag"]?(a="fas fa-file",n=this.checkIfItemIsStarred(e.id)?"fas fa-star":"far fa-star",r.a.createElement("tr",{key:e.id},r.a.createElement("td",{onClick:function(){g(e[".tag"],e.path_lower)},className:a},r.a.createElement("p",{style:{paddingLeft:"1em",display:"inline-block"}}),e.name,"/>"),r.a.createElement("td",null,e.size),r.a.createElement("td",null,e.client_modified),r.a.createElement("td",null,e.server_modified),r.a.createElement("td",{className:n,onClick:function(){return t.changeStar(e.id)}}))):void 0},this))),r.a.createElement("form",null,r.a.createElement("input",{type:"file",id:"upload",onChange:function(t){return e.upLoadAndChangePath(t.target.files,e.state.path)}}))):null}}]),t}(r.a.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h,null),r.a.createElement(k,null),r.a.createElement(g,null),r.a.createElement(v,null))}}]),t}(n.Component),w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(E,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");w?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):b(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):b(e)})}}()}},[[18,1,2]]]);
//# sourceMappingURL=main.c067a981.chunk.js.map